# 2026-02-18

## Agent Architecture v2

- **Replaced General agent with Sysadmin** — General had too-broad tool access and was
  undermining the specialist architecture. Sysadmin scoped to file/system ops only
  (exec, read, write, edit, apply_patch, memory_search). No web, no messaging.
- **Final 5-agent architecture confirmed:** coordinator (triage only), researcher,
  coder, sysadmin, communicator, monitor.
- **AGENTS.md restructured** — added "When spawned as `<role>`" sections so all
  sub-agents sharing the workspace can find their own instructions.
- **Coordinator tool lockdown** — fixed missing deny list on agents.defaults.
  Coordinator can route and read but cannot exec, write, browse, or email.

## Smart-Routing Refocused

- **smart-routing SKILL.md rewritten** — was selecting models (redundant with
  agents.list). Now classifies complexity tier → recommends which agent to spawn.
- **routing-config.json updated** — maps tiers to agent IDs instead of model arrays.
- **sessions_spawn syntax fixed** — correct call is `sessions_spawn({ agentId: "...", task: "..." })`.
  Also added `allowAgents` to subagents config — without it, named agent spawning is blocked.

## Config Hardening

- **All secrets moved to env vars** — OPENROUTER_API_KEY, GROQ_API_KEY,
  ANTHROPIC_API_KEY, TELEGRAM_BOT_TOKEN, GATEWAY_AUTH_TOKEN all use `${VAR}` syntax.
- **env.template created** — copy to ~/.openclaw/.env and fill in keys before first run.
- **ESCALATION.md trimmed** — removed duplicated safety/heartbeat/routing sections.
  Now contains only: git workflow, group chat etiquette, memory management.

## Git

- Committed all changes: "thanks opus and 100 dollars later"
- Push pending — credentials issue with HTTPS remote, needs SSH key or PAT update.
